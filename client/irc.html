<head>
  <title>idletron</title>
  <!--<link href="//netdna.bootstrapcdn.com/font-awesome/3.2.1/css/font-awesome.css" rel="stylesheet">-->
</head>

<body>
  {{#if currentUser}}
    {{> home_logged_in}}
  {{else}}
    {{> home_logged_out}}
  {{/if}}
</body>

<template name="home_logged_in">
  <div class="header header-logged-in">
    <div class="container">
      <a href="/" class="logo">idletron</a>
      <ul class="top-nav">
        <li><a href="/explore">Explore</a></li>
        <li><a href="/account">Account</a></li>
        <li><a href="/logout">Sign out</a></li>
      </ul>
    </div>
  </div>
  {{#if connection}}
    <div class="container">
      {{renderPage}}
    </div>
  {{else}}
    Connecting..
  {{/if}}
</template>

<template name="home_logged_out">
  {{#unless currentUser}}
    <div class="marketing-section-signup">
      <div class="container">
        <form id="form-signup">
          <input type="text" id="auth-nick" placeholder="Pick a username">
          <input type="email" id="auth-email" placeholder="Your email">
          <input type="password" id="auth-pw" placeholder="Create a passphrase">
          <input type="submit" value="Sign up">
          <span class="privacy-print">By clicking "Sign up", you agree to our terms of service and privacy policy.</span>
        </form>
        <h1 class="heading">Join the conversation.</h1>
        <p class="subhead">
          Connect to our public netork in seconds. Create and joins channels, add bots or make your own. Need a private network?<br/>
          <a href="/plans">Upgraded plans start at $5/mo.</a>
        </p>
      </div>
    </div>
    <div class="signin">
      <form id="form-signin">
        <input type="text" id="signin-username" placeholder="Username or email">
        <input type="password" id="signin-password" placeholder="Passphrase">
        <input type="submit" value="Sign in">
      </form>
    </div>
  {{/unless}}
</template>

<template name="channel_main">
  {{> channels}}
  <div class="channel-container">
    {{> channel_header}}
    {{> messages}}
    {{> say}}
  </div>
</template>

<template name="channel_settings">
  {{> channels}}
  <div class="channel-container">
    {{> channel_header}}
    {{> settings}}
  </div>
</template>

<template name="channel_header">
  {{#unless all}}
    <div class="channel-breadcrumb">
      <a href="/channels/{{url_channel}}" class="channel-name">{{channel}}</a>
      <span class="slash">&nbsp;/&nbsp;</span>
      <a href="/channels/{{url_channel}}/users" class="user-count">
        <i class="icon-user"></i><strong>{{users}}</strong> users
      </a>
    </div>
    <div class="buttons">
      <a href="/channels/{{url_channel}}/settings" class="settings">settings</a>
      <a class="add-bot">invite</a>
    </div>
  {{/unless}}
</template>

<template name="channels">
  <ul class="channels">
    <li class="all-channels {{all}}">
      <a href="/">
        All channels
        <!--<span class="badge badge-info">{{notification_count}}</span>-->
      </a>
    </li>
    {{#each channels}}
      <li class="channel {{selected}}">
        {{#if private}}<i class="icon-lock"></i> {{/if}}
        <a href="/channels/{{url_name}}">
          {{.}}
          <!--<span class="badge badge-info">{{notification_count}}</span>-->
        </a>
        <button type="button" class="close">&times;</button>
      </li>
    {{/each}}
    <li class="new-channel-li">
      <span class="new-channel-link">+ Add channel</span>
      <form class="new-channel-form">
        <input type="text" class="new-channel-input" autocomplete="off" placeholder="Add Channel">
      </form>
    </li>
  </ul>
</template>

<template name="messages">
  <div class="topic">
    {{topic}}
    {{#if op_status}}
      <span class="topic-edit">&mdash; <a href="#">Edit</a></span>
    {{/if}}
  </div>
  <form id="topic-form">
    <input type="text" id="topic-name" autocomplete="off" placeholder="No topic set." value="{{topic}}">
    <a href="#" class="cancel">cancel</a>
  </form>
  <ul class="messages nav nav-stacked">
    {{#each messages}}
      {{> message}}
    {{/each}}
  </ul>
</template>

<template name="say">
  {{#unless all}}
    <div class="input-container">
      <form id="say">
        <input type="text" class="span6" id="say-input" autocomplete="off" placeholder="Send a message or type ? for help.">
      </form>
    </div>
  {{/unless}}
</template>

<template name="message">
  {{#if joinToPrev}}
    <li id="{{_id}}" data-nick="{{from}}" data-channel="{{channel}}" class="message join {{message_class}}">
      <div class="divider"></div>
      <small class="muted pull-right">{{timeAgo}}</small>
      <p>{{text}}</p>
    </li>
  {{else}}
    <li id="{{_id}}" data-nick="{{from}}" data-channel="{{channel}}" class="message {{message_class}}">
      <span class="reply">
        <span class="{{status}}">&bull;</span>
        <strong>{{from}}</strong>
        {{#if all}}
          <span class="muted">{{channel}}</span>
        {{/if}}
      </span>
      {{#unless self}}
        &nbsp;
        <div class="actions">
          <div class="action reply-action">
            <i class="icon-share-alt"></i> Reply
          </div>
          &nbsp;
          <div class="action ignore-action">
            <i class="icon-volume-off"></i> Ignore
          </div>
          {{#if op_status}}
            &nbsp;
            <div class="action kick">
              <i class="icon-share"></i> Kick
            </div>
            &nbsp;
            <div class="action">
              <i class="icon-ban-circle"></i> Ban
            </div>
          {{/if}}
          {{#if isConvo}}
            &nbsp;
            <div class="action convo">
              <i class="icon-comment"></i> View conversation
            </div>
          {{/if}}
        </div>
      {{/unless}}
      <small class="muted pull-right">{{timeAgo}}</small>
      <p>{{text}}</p>
    </li>
  {{/if}}
</template>

<template name="notification">
  <li id="{{_id}}" data-channel="{{to}}" class="message">
    <span class="reply">
      <strong>{{from}}</strong>
      <button type="button" class="close">&times;</button>
      {{#if all}}
        <span class="muted">{{to}}</span>
      {{/if}}
    </span>
    <small class="muted pull-right">{{timeAgo}}</small>
    <p>{{text}}</p>
  </li>
</template>

<template name="explore">
  <ul class="nav nav-tabs">
    <li class="active"><a href="#">Top</a></li>
    <li class=""><a href="#">Trending</a></li>
    <li class=""><a href="#">Categories</a></li>
  </ul>
  <ul class="channel-list">
    {{#each channels}}
      <li>
        <h3>
          <a href="/channels/{{url_name}}">{{name}}</a>
        </h3>
        <div class="body">
          {{topic}}
        </div>
      </li>
    {{/each}}
  </ul>
</template>

<template name="settings">
  {{#if op_status}}
    <div class="settings-section">
      <div class="section-heading">Options</div>
      <form>
        <fieldset>
          <input type="text" class="form-control" id="inputTopic" placeholder="Enter topic">
          <label>
            <input id="privateCheckbox" type="checkbox" {{private_checked}}>
            Private
          </label>
        </fieldset>
      </form>
    </div>
    <div class="settings-section">
      <div class="section-heading">Operators</div>
      op user
      op list
    </div>
    <div class="settings-section">
      <div class="section-heading">Bans</div>
      ban user
      ban list
    </div>
    <div class="settings-section">
      <div class="section-heading">Bots</div>
      add bot
      bot list
    </div>
  {{/if}}
  <div class="settings-section">
    <div class="section-heading">Invite users</div>
    ignore user:
    ignored users list
  </div>
  <div class="settings-section">
    <div class="section-heading">Ignore</div>
    <ul>
      {{#each ignore_list}}
        <li>
          {{.}}
          <button type="button" class="close">&times;</button>
        </li>
      {{/each}}
    </ul>
    <form id="ignore-form">
      <fieldset>
        <input type="text" class="form-control" id="inputIgnore" placeholder="Ignore user" autocomplete="off">
      <fieldset>
    <form>
    <input type="checkbox" id="inputIgnoreJoinPart"> Show join/part messages
  </div>
</template>
